generator client {
  provider = "prisma-client-js"
}


datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Users {
  id                Int       @id @default(autoincrement())
  email             String    @unique(map: "email")
  supabaseId  String? @unique
  username          String    @unique(map: "username")
  name              String
  lastname          String
  password          String    @db.VarChar(255)
  phone             String?
  image             String?
  role              Role
  active            Boolean   @default(true)
  resetToken        String?
  resetTokenExpires DateTime?
  company           String?
  companyEmail      String?
  companyPhone      String?
  companyRUT        String?
  driveURL          String?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @default(now()) @updatedAt
}

model Services {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  createdBy   String?
  description String
  price       String?
  imageUrl    String
  createdAt   DateTime @default(now())
}

model Resources {
  id          Int            @id @default(autoincrement())
  name        String         @unique
  summary     String
  createdBy   String?
  type        TypeResource
  description String?
  linkUrl     String?
  references  String?
  pdfUrl      String?  
  imageUrl    String
  createdAt   DateTime       @default(now())
}

model Blog {
  id          Int      @id @default(autoincrement())
  title       String   @unique
  author      String?
  summary     String
  link        String?
  bodyText    String?
  references  String?
  imageUrl    String
  pdfUrl      String? 
  status    String   @default("publicado")
  createdAt   DateTime @default(now())
}

model ContactForm {
  id        Int      @id @default(autoincrement())
  name      String
  lastname  String
  email     String   @db.VarChar(255) @unique
  phone     String?
  message   String   @db.Text
  createdAt DateTime @default(now())
}

model CotizationForm {
  id        Int      @id @default(autoincrement())
  name      String
  lastname  String
  email     String   @db.VarChar(255) @unique
  phone     String?
  service   String
  message   String   @db.Text
  createdAt DateTime @default(now())
}

enum Role {
  ADMIN
  TEAM
  CLIENT
}

enum TypeResource {
  CAPACITACION
  PLANTILLA
}